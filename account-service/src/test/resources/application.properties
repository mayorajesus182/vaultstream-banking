# ============================================================
# Test Configuration for Account Service
# ============================================================

quarkus.application.name=account-service-test

# HTTP Server
quarkus.http.port=8082
quarkus.http.test-port=0

# H2 In-Memory Database for Unit Tests
%test.quarkus.datasource.db-kind=h2
%test.quarkus.datasource.jdbc.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1
%test.quarkus.datasource.username=sa
%test.quarkus.datasource.password=
%test.quarkus.hibernate-orm.database.generation=drop-and-create
%test.quarkus.hibernate-orm.log.sql=false

# Disable Flyway for unit tests
%test.quarkus.flyway.migrate-at-start=false

# Kafka - use in-memory connector for tests
%test.mp.messaging.incoming.customer-events-in.connector=smallrye-in-memory

# Disable OIDC for tests
%test.quarkus.oidc.enabled=false

# Health checks for tests
%test.quarkus.health.extensions.enabled=false

# Logging for tests
%test.quarkus.log.level=INFO
%test.quarkus.log.category."com.vaultstream".level=DEBUG
%test.quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] %s%e%n

# Test data configuration
%test.quarkus.test.continuous-testing=disabled
